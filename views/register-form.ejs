<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Conference Registration</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="bg-light">
    <!-- Navbar -->
    <nav class="navbar navbar-light bg-white shadow-sm">
      <div class="container d-flex justify-content-between">
        <span class="navbar-brand mb-0 h1">Conference Registration</span>
        <form action="/auth/logout" method="POST">
          <button type="submit" class="btn btn-danger btn-sm">Logout</button>
        </form>
      </div>
    </nav>

    <!-- Registration Form -->
    <div class="container mt-4">
      <h3>Welcome, <%= user.name %></h3>
      <p>Please fill out your registration details and payment information:</p>

      <form
        action="/register/complete"
        method="POST"
        enctype="multipart/form-data"
      >
        <!---->

        <!---->

        <!-- Salutation -->
        <div class="mb-3">
          <label class="form-label">Salutation</label>
          <select class="form-select" name="salutation" required>
            <option value="" selected disabled>Select Salutation</option>
            <option value="Prof.">Prof.</option>
            <option value="Dr.">Dr.</option>
            <option value="Mr.">Mr.</option>
            <option value="Ms.">Ms.</option>
          </select>
        </div>

        <!-- First Name and Last Name -->
        <div class="row">
          <div class="col mb-3">
            <label class="form-label">First Name</label>
            <input
              type="text"
              class="form-control"
              name="firstName"
              value="<%= user.name.split(' ')[0] %>"
              required
            />
          </div>
          <div class="col mb-3">
            <label class="form-label">Last Name</label>
            <input
              type="text"
              class="form-control"
              name="lastName"
              value="<%= user.name.split(' ')[1] || '' %>"
              required
            />
          </div>
        </div>

        <!-- Email (readonly) -->
        <div class="mb-3">
          <label class="form-label">Email</label>
          <input
            type="email"
            class="form-control"
            name="email"
            value="<%= user.email %>"
            readonly
          />
        </div>

        <!-- Gender -->
        <div class="mb-3">
          <label class="form-label">Gender</label><br />
          <input type="radio" name="gender" value="Male" checked /> Male
          <input type="radio" name="gender" value="Female" /> Female
          <input type="radio" name="gender" value="Other" /> Other
        </div>

        <!-- Year of Birth -->
        <div class="mb-3">
          <label class="form-label">Year of Birth</label>
          <select class="form-select" name="yearOfBirth" required>
            <% for(let y=1950; y<=2025; y++) { %> <% if(y == 1985) { %>
            <option value="<%= y %>" selected><%= y %></option>
            <% } else { %>
            <option value="<%= y %>"><%= y %></option>
            <% } %> <% } %>
          </select>
        </div>

        <!-- Affiliation -->
        <div class="mb-3">
          <label for="primaryAffiliation" class="form-label"
            >Primary Affiliation</label
          >
          <input
            type="text"
            class="form-control"
            id="primaryAffiliation"
            name="primaryAffiliation"
            required
          />
        </div>

        <!-- Country -->
        <div class="mb-3">
          <label class="form-label">Country</label>
          <select class="form-select" name="country" required>
            <option value="" selected disabled>Select Country</option>
            <option value="Afghanistan">Afghanistan</option>
            <option value="Albania">Albania</option>
            <option value="Algeria">Algeria</option>
            <option value="Andorra">Andorra</option>
            <option value="Angola">Angola</option>
            <option value="Argentina">Argentina</option>
            <option value="Armenia">Armenia</option>
            <option value="Australia">Australia</option>
            <option value="Austria">Austria</option>
            <option value="Azerbaijan">Azerbaijan</option>
            <option value="Bahamas">Bahamas</option>
            <option value="Bahrain">Bahrain</option>
            <option value="Bangladesh">Bangladesh</option>
            <option value="Barbados">Barbados</option>
            <option value="Belarus">Belarus</option>
            <option value="Belgium">Belgium</option>
            <option value="Belize">Belize</option>
            <option value="Benin">Benin</option>
            <option value="Bhutan">Bhutan</option>
            <option value="Bolivia">Bolivia</option>
            <option value="Bosnia and Herzegovina">
              Bosnia and Herzegovina
            </option>
            <option value="Botswana">Botswana</option>
            <option value="Brazil">Brazil</option>
            <option value="Brunei">Brunei</option>
            <option value="Bulgaria">Bulgaria</option>
            <option value="Burkina Faso">Burkina Faso</option>
            <option value="Burundi">Burundi</option>
            <option value="Cambodia">Cambodia</option>
            <option value="Cameroon">Cameroon</option>
            <option value="Canada">Canada</option>
            <option value="Chad">Chad</option>
            <option value="Chile">Chile</option>
            <option value="China">China</option>
            <option value="Colombia">Colombia</option>
            <option value="Costa Rica">Costa Rica</option>
            <option value="Croatia">Croatia</option>
            <option value="Cuba">Cuba</option>
            <option value="Cyprus">Cyprus</option>
            <option value="Czech Republic">Czech Republic</option>
            <option value="Denmark">Denmark</option>
            <option value="Dominican Republic">Dominican Republic</option>
            <option value="Ecuador">Ecuador</option>
            <option value="Egypt">Egypt</option>
            <option value="Estonia">Estonia</option>
            <option value="Ethiopia">Ethiopia</option>
            <option value="Fiji">Fiji</option>
            <option value="Finland">Finland</option>
            <option value="France">France</option>
            <option value="Germany">Germany</option>
            <option value="Greece">Greece</option>
            <option value="Greenland">Greenland</option>
            <option value="Guatemala">Guatemala</option>
            <option value="Haiti">Haiti</option>
            <option value="Honduras">Honduras</option>
            <option value="Hungary">Hungary</option>
            <option value="Iceland">Iceland</option>
            <option value="India">India</option>
            <option value="Indonesia">Indonesia</option>
            <option value="Iran">Iran</option>
            <option value="Iraq">Iraq</option>
            <option value="Ireland">Ireland</option>
            <option value="Israel">Israel</option>
            <option value="Italy">Italy</option>
            <option value="Jamaica">Jamaica</option>
            <option value="Japan">Japan</option>
            <option value="Jordan">Jordan</option>
            <option value="Kazakhstan">Kazakhstan</option>
            <option value="Kenya">Kenya</option>
            <option value="Kuwait">Kuwait</option>
            <option value="Kyrgyzstan">Kyrgyzstan</option>
            <option value="Laos">Laos</option>
            <option value="Latvia">Latvia</option>
            <option value="Lebanon">Lebanon</option>
            <option value="Liberia">Liberia</option>
            <option value="Libya">Libya</option>
            <option value="Lithuania">Lithuania</option>
            <option value="Luxembourg">Luxembourg</option>
            <option value="Madagascar">Madagascar</option>
            <option value="Malaysia">Malaysia</option>
            <option value="Maldives">Maldives</option>
            <option value="Mali">Mali</option>
            <option value="Malta">Malta</option>
            <option value="Mexico">Mexico</option>
            <option value="Monaco">Monaco</option>
            <option value="Mongolia">Mongolia</option>
            <option value="Morocco">Morocco</option>
            <option value="Myanmar">Myanmar</option>
            <option value="Nepal">Nepal</option>
            <option value="Netherlands">Netherlands</option>
            <option value="New Zealand">New Zealand</option>
            <option value="Nigeria">Nigeria</option>
            <option value="North Korea">North Korea</option>
            <option value="Norway">Norway</option>
            <option value="Oman">Oman</option>
            <option value="Pakistan">Pakistan</option>
            <option value="Panama">Panama</option>
            <option value="Paraguay">Paraguay</option>
            <option value="Peru">Peru</option>
            <option value="Philippines">Philippines</option>
            <option value="Poland">Poland</option>
            <option value="Portugal">Portugal</option>
            <option value="Qatar">Qatar</option>
            <option value="Romania">Romania</option>
            <option value="Russia">Russia</option>
            <option value="Saudi Arabia">Saudi Arabia</option>
            <option value="Serbia">Serbia</option>
            <option value="Singapore">Singapore</option>
            <option value="Slovakia">Slovakia</option>
            <option value="Slovenia">Slovenia</option>
            <option value="South Africa">South Africa</option>
            <option value="South Korea">South Korea</option>
            <option value="Spain">Spain</option>
            <option value="Sri Lanka">Sri Lanka</option>
            <option value="Sudan">Sudan</option>
            <option value="Sweden">Sweden</option>
            <option value="Switzerland">Switzerland</option>
            <option value="Syria">Syria</option>
            <option value="Taiwan">Taiwan</option>
            <option value="Tajikistan">Tajikistan</option>
            <option value="Tanzania">Tanzania</option>
            <option value="Thailand">Thailand</option>
            <option value="Turkey">Turkey</option>
            <option value="Uganda">Uganda</option>
            <option value="Ukraine">Ukraine</option>
            <option value="United Arab Emirates">United Arab Emirates</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="United States">United States</option>
            <option value="Uruguay">Uruguay</option>
            <option value="Uzbekistan">Uzbekistan</option>
            <option value="Vatican City">Vatican City</option>
            <option value="Venezuela">Venezuela</option>
            <option value="Vietnam">Vietnam</option>
            <option value="Yemen">Yemen</option>
            <option value="Zambia">Zambia</option>
            <option value="Zimbabwe">Zimbabwe</option>
          </select>
        </div>

        <!-- Are you a Student? -->
        <div class="mb-3">
          <label class="form-label">Are you a Student?</label><br />
          <input type="radio" name="isStudent" value="yes" /> Yes
          <input type="radio" name="isStudent" value="no" checked /> No
        </div>

        <!-- Student ID Card (conditionally shown) -->
        <div class="mb-3" id="studentIdDiv" style="display: none">
          <label class="form-label">Student ID Card (PDF)</label>
          <input
            type="file"
            class="form-control"
            name="studentIdCard"
            accept="application/pdf"
          />
        </div>

        <!-- Mobile Contact -->
        <div class="mb-3">
          <label class="form-label"
            >Mobile Contact Number with country code (ex:- +91xxxxxxxxxx
            )</label
          >
          <input type="text" class="form-control" name="mobile" required />
        </div>

        <!-- WhatsApp Number -->
        <div class="mb-3">
          <label class="form-label"
            >WhatsApp Number with country code (ex:- +91xxxxxxxxxx )</label
          >
          <input type="text" class="form-control" name="whatsapp" />
        </div>

        <!-- Author -->
        <div class="mb-3">
          <label class="form-label">Are you an Author?</label><br />
          <input type="radio" name="isAuthor" value="yes" /> Yes
          <input type="radio" name="isAuthor" value="no" checked /> No
        </div>

        <!-- Nationality -->
        <div class="mb-3">
          <label class="form-label">Nationality</label><br />
          <input type="radio" name="nationality" value="national" checked />
          National
          <input type="radio" name="nationality" value="international" />
          International
        </div>

        <!-- Category -->
        <div class="mb-3">
          <label class="form-label">Category</label>
          <select class="form-select" name="category" required>
            <option value="" selected disabled>Select category</option>
            <option value="IEEE Member">IEEE Member</option>
            <option value="Non-member">Non-member</option>
            <option value="IEEE Student Member">IEEE Student Member</option>
            <option value="Student Non-member">Student Non-member</option>
          </select>
        </div>

        <!-- IEEE Membership Number -->
        <div class="mb-3">
          <label class="form-label">IEEE Membership Number (optional)</label>
          <input type="text" class="form-control" name="ieeeNumber" />
        </div>

        <!-- Conference Type -->
        <div class="mb-3">
          <label class="form-label">Conference Type</label>
          <select
            class="form-select"
            name="conferenceType"
            id="conferenceType"
            required
          >
            <option value="full">
              Full Conference including Tutorials/Workshops
            </option>
            <option value="tutorial">Only Tutorial/Workshop</option>
          </select>
        </div>

        <!-- Paper ID -->
        <div class="mb-3">
          <label class="form-label">Paper ID</label>
          <input type="text" class="form-control" name="paperId" id="paperId" />
        </div>

        <!-- Summary String -->
        <div class="mb-3">
          <label class="form-label">KeyString (to be pasted in SBI I collect)</label>
          <div id="summaryDisplay" class="alert alert-warning fs-6">--</div>
          <input type="hidden" name="summary" id="summaryInput" />
        </div>

        <!-- Fee Display (calculated later) -->
        <div class="mb-3">
          <label class="form-label">Your Calculated Fee:</label>
          <div id="feeDisplay" class="alert alert-info fs-5">--</div>
          <input type="hidden" name="fee" id="feeInput" />
        </div>

        <!-- Dummy Payment Button -->
        <div id="paymentSection" class="mt-3" style="display: block">
          <p><strong>Proceed to Payment:</strong></p>
          <a
            id="paymentLink"
            href="https://onlinesbi.sbi.bank.in/sbicollect/#"
            target="_blank"
            class="btn btn-success"
          >
            Pay Now
          </a>
        </div>

        <hr />

        <!-- Payment Info -->
        <h5>Payment Details</h5>
        <div class="mb-3">
          <label for="transactionNo" class="form-label"
            >Transaction Number (enter "0" if not applicable)</label
          >
          <input
            type="text"
            class="form-control"
            id="transactionNo"
            name="transactionNo"
            required
          />
        </div>

        <div class="mb-3">
          <label for="paymentProof" class="form-label"
            >Upload Proof of Payment (upload a blank PDF if not applicable)</label
          >
          <input
            class="form-control"
            type="file"
            id="paymentProof"
            name="paymentProof"
            accept="application/pdf"
            required
          />
        </div>

        <!-- Date of Payment -->
        <div class="mb-3">
          <label for="dateOfPayment" class="form-label">Date of Payment</label>
          <input
            type="date"
            class="form-control"
            id="dateOfPayment"
            name="dateOfPayment"
            required
          />
        </div>

        <!-- Comment -->
        <div class="mb-3">
          <label class="form-label">Comment (if any)</label>
          <textarea class="form-control" name="comment" rows="3"></textarea>
        </div>

        <button type="submit" class="btn btn-success">
          Submit & Generate Receipt
        </button>

        <a href="/user/dashboard" class="btn btn-secondary"
          >Back to Dashboard</a
        >
      </form>
    </div>

    <!-- External JS -->
    <script src="/js/registration.js"></script>
  </body>
</html>
